{{template "base" .}}
{{define "main"}}
<div style="display: grid; grid-template-columns: 1fr 2fr; gap: 24px;">
    <section class="card" style="display: flex; flex-direction: column; height: 75vh;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0;">Docker Host</h3>
            <button onclick="refresh('docker')" class="btn" style="padding: 5px 15px; font-size: 0.7rem;">Refresh</button>
        </div>
        <pre id="docker-output" style="flex-grow: 1;">{{.DockerContainers}}</pre>
    </section>
    <section class="card" style="display: flex; flex-direction: column; height: 75vh;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0;">System Logs (Filtered)</h3>
            <button onclick="refresh('logs')" class="btn primary" style="padding: 5px 15px; font-size: 0.7rem;">Refresh Logs</button>
        </div>
        <pre id="log-output" style="flex-grow: 1;">Awaiting logs...</pre>
    </section>
</div>
<script>
    async function refresh(type) {
        const out = document.getElementById(type === 'logs' ? 'log-output' : 'docker-output');
        const res = await fetch(`/?refresh=${type}`);
        out.textContent = await res.text();
        if (type === 'logs') out.scrollTop = out.scrollHeight;
    }
    document.addEventListener('DOMContentLoaded', () => { refresh('logs'); setInterval(() => refresh('logs'), 10000); });
</script>
{{end}}